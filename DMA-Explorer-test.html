<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DMA Explorer - Dedicated Resources</title>
  <style>
    :root {
      --primary: #0f2a44;
      --accent: #1f6feb;
      --bg-light: #f7f9fc;
      --border: #d6e0ef;
    }

    body { 
      margin: 0; 
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
      display: grid; 
      grid-template-columns: 280px 1fr 320px; 
      height: 100vh; 
      background: var(--bg-light); 
      overflow: hidden;
    }

    /* Panels */
    .panel { overflow-y: auto; padding: 30px; height: 100vh; box-sizing: border-box; }
    .left-panel { background: var(--primary); color: white; padding: 20px; border-right: 1px solid #081a2b; }
    .center-panel { background: #f0f4f8; border-right: 1px solid var(--border); }
    .right-panel { background: white; }

    /* Left Nav */
    h3 { margin-top: 0; color: #9ec3ff; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px; border-bottom: 1px solid #1f4c7a; padding-bottom: 10px; }
    .obligation-link { 
      padding: 12px; margin-bottom: 8px; background: #173a5e; border-radius: 6px; 
      cursor: pointer; font-size: 0.85rem; transition: 0.2s; border-left: 4px solid transparent;
    }
    .obligation-link:hover { background: #1f4c7a; }
    .obligation-link.active { background: var(--accent); border-left-color: white; font-weight: bold; }

    /* Content Cards */
    .main-card { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 6px rgba(0,0,0,0.05); margin-bottom: 30px; border: 1px solid var(--border); }
    .reference-card { background: #ffffff; padding: 20px; border-radius: 8px; border-left: 4px solid #cbd5e0; margin-bottom: 20px; border-top: 1px solid var(--border); border-right: 1px solid var(--border); border-bottom: 1px solid var(--border); }
    
    .label { font-size: 0.7rem; font-weight: bold; color: var(--accent); text-transform: uppercase; margin-bottom: 8px; display: block; }
    .title { font-size: 1.4rem; font-weight: 800; color: var(--primary); margin-bottom: 10px; }
    .text-body { font-size: 1rem; line-height: 1.6; color: #333; white-space: pre-wrap; }
    
    /* Right Panel Resources */
    .resource-box { padding: 20px; border-radius: 8px; background: #f8f9fa; border: 1px solid var(--border); margin-bottom: 15px; }
    .resource-box strong { display: block; margin-bottom: 10px; color: var(--primary); font-size: 1rem; }
    .resource-link-btn { 
        display: inline-block; padding: 10px 15px; background: var(--accent); 
        color: white !important; text-decoration: none; border-radius: 6px; 
        font-size: 0.85rem; font-weight: bold; width: 100%; text-align: center; box-sizing: border-box;
    }
    .resource-link-btn:hover { background: #1559be; }

    .empty-state { color: #888; font-style: italic; text-align: center; margin-top: 100px; padding: 20px; }
  </style>
</head>
<body>

<div class="panel left-panel">
  <h3>DMA Provisions</h3>
  <div id="nav"></div>
</div>

<div class="panel center-panel">
  <div id="main-display">
    <div class="empty-state">Select a provision to view content and references.</div>
  </div>
</div>

<div class="panel right-panel">
  <h3>Further Resources</h3>
  <div id="resources-display">
    <div class="empty-state">Links for the selected page will appear here.</div>
  </div>
</div>

<script>
/**
 * DATA STRUCTURE
 * Add your provisions here. 
 * 'resourceLink' is the dedicated link for the RIGHT column.
 * 'links' determines what appears automatically BELOW the content in the center.
 */
const rows = [
  {
    provision: "Recital 46",
    title: "[Dual Role and Usage of Business User Data]",
    text: `In certain circumstances, a gatekeeper has a dual role as an undertaking providing core platform services, whereby it provides a core platform service, and possibly other services provided together with, or in support of, that core platform service to its business users, while also competing or intending to compete with those same business users in the provision of the same or similar services or products to the same end users. In those circumstances, a gatekeeper can take advantage of its dual role to use data, generated or provided by its business users in the context of activities by those business users when using the core platform services or the services provided together with, or in support of, those core platform services, for the purpose of its own services or products. The data of the business user can also include any data generated by or provided during the activities of its end users. This can be the case, for instance, where a gatekeeper provides an online marketplace or a software application store to business users, and at the same time provides services as an undertaking providing online retail services or software applications. To prevent gatekeepers from unfairly benefitting from their dual role, it is necessary to ensure that they do not use any aggregated or non-aggregated data, which could include anonymised and personal data that is not publicly available to provide similar services to those of their business users. That obligation should apply to the gatekeeper as a whole, including but not limited to its business unit that competes with the business users of a core platform service.`,
    links: ["Art. 6(2)"],
    resources: [
      {Label: "Beck online: Wolf-Posch, Art. 6(2) DMA, in: Podszun, DMA Commentary, 2024", URL: "https://beck-online.beck.de/?vpath=bibdata%2Fkomm%2FPodKoDMA_1%2FEU_VO_2022_1925%2Fcont%2FPodKoDMA%2EEU_VO_2022_1925%2Ea6%2Ex2%2Ehtm"} 
  ]
      },
  {
    provision: "Recital 51",
    title: "[Self-preferencing in Ranking]",
    text: `Gatekeepers are often vertically integrated and offer certain products or services to end users through their own core platform services, or through a business user over which they exercise control which frequently leads to conflicts of interest. This can include the situation whereby a gatekeeper provides its own online intermediation services through an online search engine. When offering those products or services on the core platform service, gatekeepers can reserve a better position, in terms of ranking, and related indexing and crawling, for their own offering than that of the products or services of third parties also operating on that core platform service. This can occur for instance with products or services, including other core platform services, which are ranked in the results communicated by online search engines, or which are partly or entirely embedded in online search engines results, groups of results specialised in a certain topic, displayed along with the results of an online search engine, which are considered or used by certain end users as a service distinct or additional to the online search engine.

Other instances are those of software applications which are distributed through software application stores, or videos distributed through a video-sharing platform, or products or services that are given prominence and display in the newsfeed of an online social networking service, or products or services ranked in search results or displayed on an online marketplace, or products or services offered through a virtual assistant. Such reserving of a better position of gatekeeper’s own offering can take place even before ranking following a query, such as during crawling and indexing. For example, already during crawling, as a discovery process by which new and updated content is being found, as well as indexing, which entails storing and organising of the content found during the crawling process, the gatekeeper can favour its own content over that of third parties. In those circumstances, the gatekeeper is in a dual-role position as intermediary for third-party undertakings and as undertaking directly providing products or services. Consequently, such gatekeepers have the ability to undermine directly the contestability for those products or services on those core platform services, to the detriment of business users which are not controlled by the gatekeeper.`,
    links: ["Art. 6(5)"],
    resources: [
      {Label: "Beck online: Heinz, Art. 6(5) DMA, in: Podszun, DMA Commentary, 2024", URL: "https://beck-online.beck.de/?vpath=bibdata%2Fkomm%2FPodKoDMA_1%2FEU_VO_2022_1925%2Fcont%2FPodKoDMA%2EEU_VO_2022_1925%2Ea6%2Ex5%2Ehtm"},
      {Label: "Commission Non-Compliance Investigation against Alphabet, Case DMA.100193", URL: "https://competition-cases.ec.europa.eu/cases/DMA.100193"}
  ]
  },
  {
    provision: "Recital 52",
    title: "[Non-discrimination in Ranking]",
    text: `In such situations, the gatekeeper should not engage in any form of differentiated or preferential treatment in ranking on the core platform service, and related indexing and crawling, whether through legal, commercial or technical means, in favour of products or services it offers itself or through a business user which it controls. To ensure that this obligation is effective, the conditions that apply to such ranking should also be generally fair and transparent. Ranking should in this context cover all forms of relative prominence, including display, rating, linking or voice results and should also include instances where a core platform service presents or communicates only one result to the end user. To ensure that this obligation is effective and cannot be circumvented, it should also apply to any measure that has an equivalent effect to the differentiated or preferential treatment in ranking. The guidelines adopted pursuant to Article 5 of Regulation (EU) 2019/1150 should also facilitate the implementation and enforcement of this obligation.`,
    links: ["Art. 6(5)"],
    resources: [
      {Label: "Beck online: Heinz, Art. 6(5) DMA, in: Podszun, DMA Commentary, 2024", URL: "https://beck-online.beck.de/?vpath=bibdata%2Fkomm%2FPodKoDMA_1%2FEU_VO_2022_1925%2Fcont%2FPodKoDMA%2EEU_VO_2022_1925%2Ea6%2Ex5%2Ehtm"},
      {Label: "Commission Non-Compliance Investigation against Alphabet, Case DMA.100193", URL: "https://competition-cases.ec.europa.eu/cases/DMA.100193"}
  ]
  },
  {
    provision: "Art. 6(2)",
    title: "[Restriction on Using Business User Data]",
    text: `The gatekeeper shall not use, in competition with business users, any data that is not publicly available that is generated or provided by those business users in the context of their use of the relevant core platform services or of the services provided together with, or in support of, the relevant core platform services, including data generated or provided by the customers of those business users.

For the purposes of the first subparagraph, the data that is not publicly available shall include any aggregated and non-aggregated data generated by business users that can be inferred from, or collected through, the commercial activities of business users or their customers, including click, search, view and voice data, on the relevant core platform services or on services provided together with, or in support of, the relevant core platform services of the gatekeeper.`,
    links: ["Recital 46"],
    resources: [
      {Label: "Beck online: Wolf-Posch, Art. 6(2) DMA, in: Podszun, DMA Commentary, 2024", URL: "https://beck-online.beck.de/?vpath=bibdata%2Fkomm%2FPodKoDMA_1%2FEU_VO_2022_1925%2Fcont%2FPodKoDMA%2EEU_VO_2022_1925%2Ea6%2Ex2%2Ehtm"} 
  ]
  },
  {
    provision: "Art. 6(5)",
    title: "[Prohibition of Self-preferencing in Ranking]",
    text: `The gatekeeper shall not treat more favourably, in ranking and related indexing and crawling, services and products offered by the gatekeeper itself than similar services or products of a third party. The gatekeeper shall apply transparent, fair and non-discriminatory conditions to such ranking.`,
    links: ["Recital 51", "Recital 52"],
    resources: [
      {Label: "Beck online: Heinz, Art. 6(5) DMA, in: Podszun, DMA Commentary, 2024", URL: "https://beck-online.beck.de/?vpath=bibdata%2Fkomm%2FPodKoDMA_1%2FEU_VO_2022_1925%2Fcont%2FPodKoDMA%2EEU_VO_2022_1925%2Ea6%2Ex5%2Ehtm"},
      {Label: "Commission Non-Compliance Investigation against Alphabet, Case DMA.100193", URL: "https://competition-cases.ec.europa.eu/cases/DMA.100193"}
  ]
  }
];

function renderNav() {
  const nav = document.getElementById("nav");
  nav.innerHTML = rows.map(r => `
    <div class="obligation-link" id="nav-${r.provision.replace(/[.()\s]/g, '-')}" onclick="loadPage('${r.provision}')">
      <strong>${r.provision}</strong>
    </div>
  `).join('');
}

function loadPage(provName) {
  const item = rows.find(r => r.provision === provName);
  if (!item) return;

  // 1. Highlight Nav
  document.querySelectorAll('.obligation-link').forEach(el => el.classList.remove('active'));
  const navId = `nav-${provName.replace(/[.()\s]/g, '-')}`;
  if(document.getElementById(navId)) document.getElementById(navId).classList.add('active');

  // 2. Build References for Center Column (below content)
  const referencesHtml = item.links.map(linkName => {
    const ref = rows.find(r => r.provision === linkName.trim());
    if (!ref) return '';
    return `
      <div class="reference-card">
        <span class="label">Context: ${ref.provision}</span>
        <div class="title" style="font-size: 1.1rem;">${ref.title}</div>
        <div class="text-body" style="font-size: 0.9rem;">${ref.text}</div>
      </div>
    `;
  }).join('');

  // 3. Render Center Column
  document.getElementById('main-display').innerHTML = `
    <div class="main-card">
      <span class="label">Main Text</span>
      <div class="title">${item.provision}</div>
      <div class="text-body" style="font-weight: 600; margin-bottom: 15px;">${item.title}</div>
      <div class="text-body">${item.text}</div>
    </div>
    ${referencesHtml}
  `;

  // 4. UPDATED: Render Right Column (Multi-Resource Logic)
  const resDisplay = document.getElementById('resources-display');
  
  // Checks if the 'resources' array exists and has at least one item
  if (item.resources && item.resources.length > 0) {
    resDisplay.innerHTML = item.resources.map(res => `
      <div class="resource-box">
        <strong>${item.provision} Resource</strong>
        <p style="font-size: 0.85rem; color: #666; margin-bottom: 10px;">${res.Label}</p>
        <a href="${res.Url}" target="_blank" class="resource-link-btn">Open Resource ↗</a>
      </div>
    `).join('');
  } else {
    // Falls back to empty state if no resources are found
    resDisplay.innerHTML = `<div class="empty-state">No dedicated links for ${item.provision}.</div>`;
  }
}

renderNav();
</script>
</body>
</html>
